extends layout

block head
  title Contact | Leung Enterprises Web Design Philadelphia
  meta(name="description" content="Leung Enterprises, based in the Greater Philadelphia Area, was founded in September 2014 and has been making classy websites ever since.")
  style.
    .contact::before {
      background: url('/img/library.jpg');
      background-size: cover;
    }
block content
  - var page = 'contact'
  include partials/header
  main
    .jumbotron.flex-center.contact.trianglify.half-page.cc-before-bg
      .container
        .spacer-60
        div
          h1.text-light.text-uppercase.wow.fadeIn Contact
          h2.text-light.wow.fadeIn(data-wow-delay='0.3s') Let's get started.
    .jumbotron.full-page.white-bg.flex-center#intro-text
      .container
        .row
          .col-md-5
            .light-bg#contact-affix
              br
              h2.text-light.line1p5 You can contact us here, too
              br
              .social-row
                a(href='mailto:hello@leungenterprises.com') #[i.fa.fa-envelope]
                a(href='https://twitter.com/LeungEnterprise') #[i.fa.fa-twitter]
                a(href='https://github.com/LeungEnterprises') #[i.fa.fa-github]
                a(href="http://blog.leung.enterprises/") Blog
              br
              br
          .col-md-6.col-md-offset-1
            h2.text-light.line-1p5.
              We'll get back to you as soon as possible.
            br
            br
            .row
              form.text-left(action='//formspree.io/hello@leungenterprises.com' method='post')
                input(type='hidden' name='_next' value="http://www.leungenterprises.com/contact-thanks")
                input(type='hidden' name='_subject' value="Leung Enterprises Web Design")
                input(type='text' style="visibility: hidden; display: none;" name='_gotcha')
                .form-group
                  label.required(for="name") Your Name
                  input.form-control.input-lg#name(type='text' name='name' placeholder='Name' required)
                .form-group
                  label.required(for="name") Your Email
                  input.form-control.input-lg#email(type="email" name="_replyto" placeholder="someone@example.com" required)
                .form-group
                  label(for="message") Your Message
                  textarea.form-control.input-lg#message(placeholder='Can ya hook a brotha up with a nice website?' name='message' rows='5' style="resize: vertical;")
                .form-group
                  input(type='hidden' name='userAgent')
                  input(type='hidden' name='ipAddress')
                  button.btn.btn-success.btn-lg(type="submit") Send
    include partials/footer

block scripts
  script.
    $(document).ready(function() {
      $("input[name='userAgent']").val(navigator.userAgent);
      $.getJSON("https://api.ipify.org?format=jsonp&callback=?",
        function(json) {
          $("input[name='ipAddress']").val(json.ip);
        }
      );
    });
  script(src='/js/trianglify-0.3.1.min.js')
  script.
    function genTriangles() {
      var height = window.innerHeight;
      var width = window.innerWidth;
      var colorFunc = function(x, y) {
        return 'hsl(0,0%,'+Math.floor(Math.abs(x*y*100))+'%)';
      };
      var pattern = Trianglify({
        // in case the jumbotron is a bit bigger
        height: height * 1.3,
        width: width,
        cell_size: 100,
        color_function: colorFunc
      });
      var image = pattern.png();
      var elements = [".trianglify"];
      var afterElements = elements.map(function(el) {
        return el + '::after';
      });
      var css = "<style>" +
                  elements.toString() + " { " +
                    "position: relative;" +
                  "}" +
                  afterElements.toString() + " {" +
                    "content: '';" +
                    "display: block;" +
                    "z-index: -1;" +
                    "position: absolute;" +
                    "top: 0;" +
                    "bottom: 0;" +
                    "left: 0;" +
                    "right: 0;" +
                    "opacity: 0.5;" +
                    "background: url(" + image + ");" +
                  "}" +
                "</style>";
      $('head').append(css);
    }
    genTriangles();
    $(window).resize(function() {
      genTriangles();
    });
  script.
    if ($(window).innerWidth() >= 768) {
      var container = $('#intro-text .container');
      var affixEl = $('#contact-affix');
      var affixWidth = affixEl.outerWidth();
      var affixHeight = affixEl.outerHeight();
      var css = "<style>" +
        "#contact-affix {" +
          "height: " + affixHeight + "px;" +
          "width: " + affixWidth + "px;" +
          "display: block;" +
        "}" +
        "#contact-affix.affix {" +
          "top: " + String(Number(48) + Number(75)) + "px;" +
          "left: " + affixEl.offset().left + "px;" + 
        "}" +
        "#contact-affix.affix-bottom {" +
          "position: absolute;" +
        "}"
      "</style>";
      $('head').append(css);
      $('#contact-affix').affix({
        offset: {
          top: function() {
            return (this.top = $('.contact').outerHeight() - 75)
          },
          bottom: function() {
            return (this.bottom = $('footer').outerHeight() + 48)
          }
        }
      });
    }
